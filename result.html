<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>분석 결과 - 운명의 고등학교 찾기</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <span class="star">🎯</span>
                <h1>운명의 학교 찾기</h1>
            </div>
            <button class="back-button" onclick="goBack()">← 다시 분석하기</button>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Result Header -->
            <section class="result-header">
                <h2 class="result-title">
                    📊 <span id="userName"></span> 님을 위한 최적의 고등학교 분석 결과
                </h2>
                <div class="result-summary">
                    <p id="analysisDescription"></p>
                </div>
            </section>

            <!-- Recommended Schools -->
            <section class="recommendations section-wrapper">
                <div class="section-header">
                    <h3 class="section-title">
                        <span class="section-icon">🏫</span>
                        고등학교 진학 추천 분석
                    </h3>
                    <div class="section-divider"></div>
                </div>
                <div id="schoolRecommendations" class="recommendations-list">
                    <!-- 동적으로 생성될 추천/비추천 학교 목록 -->
                </div>
            </section>

            <!-- Direction Analysis -->
            <section class="direction-analysis section-wrapper">
                <div class="section-header">
                    <h3 class="section-title">
                        <span class="section-icon">🧭</span>
                        나에게 가장 길한 고등학교 방향
                    </h3>
                    <div class="section-divider"></div>
                </div>
                <div class="direction-container">
                    <div class="compass">
                        <div class="compass-circle">
                            <div class="compass-pointer" id="compassPointer">
                                <div class="pointer-arrow">↑</div>
                            </div>
                            <div class="compass-directions">
                                <span class="north">북</span>
                                <span class="east">동</span>
                                <span class="south">남</span>
                                <span class="west">서</span>
                            </div>
                        </div>
                    </div>
                    <div class="direction-info">
                        <h4 id="directionTitle"></h4>
                        <p id="directionExplanation"></p>
                    </div>
                </div>
            </section>

            <!-- Fortune Timeline -->
            <section class="fortune-timeline section-wrapper">
                <div class="section-header">
                    <h3 class="section-title">
                        <span class="section-icon">📈</span>
                        고등학교 3년간 운세 흐름
                    </h3>
                    <div class="section-divider"></div>
                </div>
                <div class="timeline-container">
                    <div class="timeline-chart">
                        <canvas id="fortuneChart" width="800" height="400"></canvas>
                    </div>
                    <div class="timeline-legend">
                        <div class="legend-item">
                            <span class="legend-color academic"></span>
                            <span>학업운</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color social"></span>
                            <span>대인관계운</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color health"></span>
                            <span>건강운</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Additional Info -->
            <section class="additional-info section-wrapper">
                <div class="section-header">
                    <h3 class="section-title">
                        <span class="section-icon">💡</span>
                        개인 맞춤 정보
                    </h3>
                    <div class="section-divider"></div>
                </div>
                <div class="info-cards">
                    <div class="info-card">
                        <div class="card-icon">🎯</div>
                        <h4>학습 스타일</h4>
                        <p id="learningStyle"></p>
                    </div>
                    <div class="info-card">
                        <div class="card-icon">👥</div>
                        <h4>사회성</h4>
                        <p id="socialTendency"></p>
                    </div>
                    <div class="info-card">
                        <div class="card-icon">🌟</div>
                        <h4>특별한 재능</h4>
                        <p id="specialTalent"></p>
                    </div>
                    <div class="info-card">
                        <div class="card-icon">⚠️</div>
                        <h4>주의사항</h4>
                        <p id="cautions"></p>
                    </div>
                </div>
            </section>

            <!-- Closing Message -->
            <section class="closing-message">
                <div class="message-box">
                    <h4>💡 잠깐!</h4>
                    <p>
                        이 분석은 여러분의 고등학교 선택에 도움을 주기 위한 참고 자료입니다. 
                        가장 중요한 것은 여러분의 관심사와 꿈입니다. 
                        충분한 고민과 실제 학교 방문을 통해 여러분에게 최적의 결정을 내리시길 바랍니다!
                    </p>
                </div>
            </section>

            <!-- Action Buttons -->
            <section class="action-buttons">
                <button class="secondary-button" onclick="goToInput()">다시 분석하기</button>
                <button class="primary-button" onclick="shareResult()">결과 공유하기 📤</button>
            </section>
        </main>
    </div>

    <script src="script.js"></script>
    <script>
        // 직접 HTML에서 결과 표시 - JavaScript 로딩 실패 대비
        console.log('🔥 Direct HTML Script 실행됨');
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🔥 DOMContentLoaded 이벤트 발생');
            
            // 기본 데이터 설정
            const defaultUserData = {
                name: '테스트 사용자',
                birthYear: '2008',
                birthMonth: '5',
                birthDay: '20',
                birthTime: '오시',
                gender: '남성'
            };
            
            const defaultResult = {
                summary: `${defaultUserData.name} 님은 ${defaultUserData.birthTime}에 태어나신 ${defaultUserData.gender}으로, 강한 학습 의지와 창의적 사고력을 가지고 계십니다. 특히 체계적인 학습 환경에서 뛰어난 성과를 보일 것으로 예상되어 영재고나 자율형사립고가 가장 적합합니다.`,
                recommendedSchools: [
                    {
                        rank: 1,
                        type: '과학영재학교',
                        reason: '사주에서 금(金)의 기운이 강하여 정밀하고 체계적인 사고를 선호하며, 과학과 수학 분야에서 뛰어난 재능을 발휘할 수 있습니다. 영재고의 심화 교육과정이 잠재력을 최대한 발현시킬 것입니다.'
                    },
                    {
                        rank: 2,
                        type: '자율형사립고',
                        reason: '화(火)의 기운이 적절히 조화되어 있어 활발한 대인관계와 리더십을 발휘할 수 있으며, 자율형사립고의 다양한 프로그램을 통해 전인적 성장이 가능합니다.'
                    },
                    {
                        rank: 3,
                        type: '일반고(남녀공학)',
                        reason: '균형 잡힌 성격으로 다양한 환경에 잘 적응하며, 일반고에서도 충분히 좋은 성과를 거둘 수 있습니다.'
                    }
                ],
                notRecommendedSchools: [
                    {
                        rank: 1,
                        type: '외국어고',
                        reason: '현재 사주 구조상 언어 습득보다는 논리적 사고가 더 강한 편이며, 외국어고의 암기 위주 학습법이 본래 성향과 맞지 않을 수 있습니다.'
                    },
                    {
                        rank: 2,
                        type: '예술고',
                        reason: '예술적 감각보다는 체계적이고 논리적인 사고가 강한 편이므로 예술고보다는 일반적인 학문 분야가 더 적합합니다.'
                    }
                ]
            };
            
            console.log('🔥 데이터 설정 완료:', defaultUserData, defaultResult);
            
            // localStorage에서 실제 데이터 시도
            let userData, analysisResult;
            try {
                userData = JSON.parse(localStorage.getItem('sajuUserData')) || defaultUserData;
                analysisResult = JSON.parse(localStorage.getItem('sajuAnalysisResult')) || defaultResult;
                console.log('🔥 localStorage 데이터 로드 성공');
            } catch (e) {
                console.log('🔥 localStorage 실패, 기본 데이터 사용');
                userData = defaultUserData;
                analysisResult = defaultResult;
            }
            
            // 직접 HTML 업데이트
            setTimeout(function() {
                console.log('🔥 HTML 업데이트 시작');
                
                // 사용자 이름 설정
                const userNameEl = document.getElementById('userName');
                if (userNameEl) {
                    userNameEl.textContent = userData.name;
                    console.log('🔥 사용자 이름 설정됨');
                }
                
                // 분석 요약 설정
                const summaryEl = document.getElementById('analysisDescription');
                if (summaryEl) {
                    summaryEl.textContent = analysisResult.summary;
                    console.log('🔥 분석 요약 설정됨');
                }
                
                // 학교 추천 설정
                const schoolContainer = document.getElementById('schoolRecommendations');
                if (schoolContainer) {
                    let html = '<div class="recommendation-section">';
                    html += '<h4 class="recommendation-subtitle">✅ 강력 추천하는 학교 (적합도 순)</h4>';
                    
                    analysisResult.recommendedSchools.forEach((school, index) => {
                        const rankIcon = index === 0 ? '🥇' : index === 1 ? '🥈' : '🥉';
                        html += `
                            <div class="school-card recommended-card rank-${school.rank || (index + 1)}">
                                <div class="school-ranking">${rankIcon}</div>
                                <div class="school-badge recommended-badge">${school.rank || (index + 1)}순위 추천</div>
                                <h5 class="school-name">${school.type}</h5>
                                <p class="school-reason">${school.reason}</p>
                            </div>
                        `;
                    });
                    
                    html += '</div><div class="recommendation-section">';
                    html += '<h4 class="recommendation-subtitle">❌ 권하지 않는 학교 (부적합도 순)</h4>';
                    
                    analysisResult.notRecommendedSchools.forEach((school, index) => {
                        html += `
                            <div class="school-card not-recommended-card rank-${school.rank || (index + 1)}">
                                <div class="school-ranking">❌ ${school.rank || (index + 1)}위</div>
                                <div class="school-badge not-recommended-badge">${school.rank || (index + 1)}순위 비추천</div>
                                <h5 class="school-name">${school.type}</h5>
                                <p class="school-reason">${school.reason}</p>
                            </div>
                        `;
                    });
                    
                    html += '</div>';
                    schoolContainer.innerHTML = html;
                    console.log('🔥 학교 추천 HTML 설정됨');
                }
                
                // 길한 방향 설정
                const directionTitleEl = document.getElementById('directionTitle');
                const directionExplanationEl = document.getElementById('directionExplanation');
                const compassPointerEl = document.getElementById('compassPointer');
                
                if (directionTitleEl) {
                    directionTitleEl.textContent = '북쪽이 당신에게 길한 방향입니다';
                    console.log('🔥 방향 제목 설정됨');
                }
                
                if (directionExplanationEl) {
                    directionExplanationEl.textContent = '북쪽 방향은 오행에서 학업운과 대인관계운을 상승시키는 길한 방위입니다. 이 방향에 위치한 학교에서 더욱 안정적이고 발전적인 학교생활을 할 수 있을 것입니다.';
                    console.log('🔥 방향 설명 설정됨');
                }
                
                if (compassPointerEl) {
                    compassPointerEl.style.transform = 'rotate(0deg)'; // 북쪽
                    console.log('🔥 나침반 포인터 설정됨');
                }
                
                // 개인 특성 설정
                const learningStyleEl = document.getElementById('learningStyle');
                const socialTendencyEl = document.getElementById('socialTendency');
                const specialTalentEl = document.getElementById('specialTalent');
                const cautionsEl = document.getElementById('cautions');
                
                if (learningStyleEl) {
                    learningStyleEl.textContent = '체계적이고 논리적인 학습을 선호하며, 단계별 접근을 통해 깊이 있는 이해를 추구합니다.';
                    console.log('🔥 학습 스타일 설정됨');
                }
                
                if (socialTendencyEl) {
                    socialTendencyEl.textContent = '신중하면서도 따뜻한 성격으로 진실한 우정을 중시하며, 필요시 리더십을 발휘할 수 있습니다.';
                    console.log('🔥 사회성 설정됨');
                }
                
                if (specialTalentEl) {
                    specialTalentEl.textContent = '분석적 사고와 창의적 문제해결 능력이 뛰어나며, 특히 과학과 수학 분야에서 재능이 돋보입니다.';
                    console.log('🔥 특별한 재능 설정됨');
                }
                
                if (cautionsEl) {
                    cautionsEl.textContent = '완벽주의 성향이 강해 스트레스를 받을 수 있으니, 적절한 휴식과 취미 활동을 통해 균형을 유지하는 것이 중요합니다.';
                    console.log('🔥 주의사항 설정됨');
                }
                
                // 운세 차트 그리기
                const fortuneCanvas = document.getElementById('fortuneChart');
                if (fortuneCanvas) {
                    const ctx = fortuneCanvas.getContext('2d');
                    const width = fortuneCanvas.width;
                    const height = fortuneCanvas.height;
                    
                    // 캔버스 초기화
                    ctx.clearRect(0, 0, width, height);
                    
                    // 차트 데이터
                    const years = ['1학년', '2학년', '3학년'];
                    const academic = [85, 90, 80];
                    const social = [70, 75, 85];
                    const health = [80, 85, 90];
                    
                    const margin = 80;
                    const chartWidth = width - 2 * margin;
                    const chartHeight = height - 2 * margin;
                    const stepX = chartWidth / (years.length - 1);
                    
                    // 배경 그리드
                    ctx.strokeStyle = '#e0e0e0';
                    ctx.lineWidth = 1;
                    for (let i = 0; i <= 10; i++) {
                        const y = margin + (chartHeight * i / 10);
                        ctx.beginPath();
                        ctx.moveTo(margin, y);
                        ctx.lineTo(width - margin, y);
                        ctx.stroke();
                    }
                    
                    // Y축 라벨
                    ctx.fillStyle = '#666';
                    ctx.font = '12px Noto Sans KR';
                    ctx.textAlign = 'right';
                    for (let i = 0; i <= 10; i++) {
                        const value = 100 - (i * 10);
                        const y = margin + (chartHeight * i / 10);
                        ctx.fillText(value, margin - 10, y + 4);
                    }
                    
                    // X축 라벨
                    ctx.textAlign = 'center';
                    years.forEach((year, index) => {
                        const x = margin + (stepX * index);
                        ctx.fillText(year, x, height - margin + 20);
                    });
                    
                    // 선 그래프 그리기 함수
                    function drawLine(data, color) {
                        ctx.strokeStyle = color;
                        ctx.lineWidth = 3;
                        ctx.beginPath();
                        
                        data.forEach((value, index) => {
                            const x = margin + (stepX * index);
                            const y = margin + chartHeight - (chartHeight * value / 100);
                            
                            if (index === 0) {
                                ctx.moveTo(x, y);
                            } else {
                                ctx.lineTo(x, y);
                            }
                            
                            // 점 표시
                            ctx.fillStyle = color;
                            ctx.beginPath();
                            ctx.arc(x, y, 5, 0, 2 * Math.PI);
                            ctx.fill();
                        });
                        
                        ctx.stroke();
                    }
                    
                    // 각 운세 라인 그리기
                    drawLine(academic, '#570df8');
                    drawLine(social, '#37cdbe');
                    drawLine(health, '#f000b8');
                    
                    console.log('🔥 운세 차트 그리기 완료');
                }
                
                console.log('🔥 HTML 업데이트 완료');
            }, 500);
            
        });
        
        console.log('🔥 Direct HTML Script 설정 완료');
    </script>
</body>
</html> 